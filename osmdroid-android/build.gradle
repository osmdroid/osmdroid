description = 'An Android library to display OpenStreetMap views.'
apply plugin: 'com.android.library'

android {
    compileSdkVersion = compileSdk
    defaultConfig {
        minSdkVersion 14
    }
    lintOptions {
        abortOnError false
        disable 'MissingTranslation','TypographyQuotes'
        xmlReport false
        htmlReport true
        htmlOutput file("../lint-report-osmdroid.html")
    }

    testOptions {
        unitTests.returnDefaultValues = true
    }
}

dependencies {
    testImplementation "junit:junit:${project.property('junit.version')}"
    testImplementation "org.robolectric:robolectric:${project.property('robolectric.version')}"
}

import org.apache.tools.ant.filters.*
task copyFiles(type: Copy) {
    from 'src/main/filtered/org/osmdroid'
    into 'src/main/java/org/osmdroid'
    filter(ReplaceTokens, tokens: [
            "pom.version": project.property("pom.version"),
            "date": new Date().toString()
    ])
}

preBuild.dependsOn(copyFiles)
