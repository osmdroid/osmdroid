<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-02-23 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="Date-Creation-yyyymmdd" content="20080101"/>
    <meta name="Date-Revision-yyyymmdd" content="20170116"/>
    <meta http-equiv="Content-Language" content="en"/>
    <title> osmdroid</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css"/>
    <link rel="stylesheet" href="./css/site.css"/>
    <link rel="stylesheet" href="./css/print.css" media="print"/>

    <link rel="stylesheet" type="text/css" href="./css/bootstrap-sortable.css">


    <script type="text/javascript" src="./js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap-sortable.js"></script>
    <script type="text/javascript" src="./js/moment.min.js"></script>
</head>
<body class="topBarDisabled">

<a href="https://github.com/osmdroid/osmdroid">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
    src="./img/forkme_right_gray_6d6d6d.png"
    alt="Fork me on GitHub">
    </a>


<div class="container-fluid">
    <div id="banner">
        <div class="pull-left">
            <div id="bannerLeft">
                <h2> osmdroid</h2>
            </div>
        </div>
        <div class="pull-right">
            <div id="bannerRight">
                <!-- override this with your own logo-->
                <img src="./img/logo.png"/>
            </div>
        </div>
        <div class="clear">
            <hr/>
        </div>
    </div>

    <div id="breadcrumbs">
        <ul class="breadcrumb">

            <li class="">
                <a href="https://github.com/osmdroid/" class="externalLink" title="org.osmdroid">
                    org.osmdroid</a>
                <span class="divider">/</span>
            </li>
            <li class="">
                <a href="https://github.com/osmdroid/osmdroid" class="externalLink" title="osmdroid">
                    osmdroid</a>

            </li>

            <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published:
                2017-01-16
            </li>
            <li id="projectVersion" class="pull-right">
                5.6.3
            </li>

        </ul>
    </div>


    <div class="row-fluid">
        <div id="leftColumn" class="span2">
            <div class="well sidebar-nav">


                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>

                    <li  >

                        <a href="index.html"><span class="none"></span>Introduction</a>
                    </li>

                    <!-- user generated menu goes here, basically any additional html or markdown files
                    from src/site are auto linked here-->
                     <li>

                                <a href="Applications-Using-osmdroid.html" title="Applications   Using   osmdroid">
                                    <span class="none"></span>
                                    Applications   Using   osmdroid</a>
                            </li> <li>

                                <a href="Changelog.html" title="Changelog">
                                    <span class="none"></span>
                                    Changelog</a>
                            </li> <li>

                                <a href="Debugging-osmdroid.html" title="Debugging   osmdroid">
                                    <span class="none"></span>
                                    Debugging   osmdroid</a>
                            </li> <li>

                                <a href="Developer-Guidelines.html" title="Developer   Guidelines">
                                    <span class="none"></span>
                                    Developer   Guidelines</a>
                            </li> <li>

                                <a href="FAQ.html" title="FAQ">
                                    <span class="none"></span>
                                    FAQ</a>
                            </li> <li>

                                <a href="Generated-Change-Log.html" title="Generated   Change   Log">
                                    <span class="none"></span>
                                    Generated   Change   Log</a>
                            </li> <li>

                                <a href="Home.html" title="Home">
                                    <span class="none"></span>
                                    Home</a>
                            </li> <li>

                                <a href="How-big-is-it.html" title="How   big   is   it">
                                    <span class="none"></span>
                                    How   big   is   it</a>
                            </li> <li>

                                <a href="How-to-add-the-osmdroid-library-via-Gradle.html" title="How   to   add   the   osmdroid   library   via   Gradle">
                                    <span class="none"></span>
                                    How   to   add   the   osmdroid   library   via   Gradle</a>
                            </li> <li>

                                <a href="How-to-build-osmdroid-from-source.html" title="How   to   build   osmdroid   from   source">
                                    <span class="none"></span>
                                    How   to   build   osmdroid   from   source</a>
                            </li> <li>

                                <a href="How-to-include-OsmDroid-in-a-Maven-Android-project.html" title="How   to   include   Osm Droid   in   a   Maven   Android   project">
                                    <span class="none"></span>
                                    How   to   include   Osm Droid   in   a   Maven   Android   project</a>
                            </li> <li>

                                <a href="How-to-include-OsmDroid-in-a-non-Gradle,-non-Maven-project.html" title="How   to   include   Osm Droid   in   a   non   Gradle ,   non   Maven   project">
                                    <span class="none"></span>
                                    How   to   include   Osm Droid   in   a   non   Gradle ,   non   Maven   project</a>
                            </li> <li>

                                <a href="How-to-use-the-osmdroid-library.html" title="How   to   use   the   osmdroid   library">
                                    <span class="none"></span>
                                    How   to   use   the   osmdroid   library</a>
                            </li> <li>

                                <a href="Important-notes-on-using-osmdroid-in-your-app.html" title="Important   notes   on   using   osmdroid   in   your   app">
                                    <span class="none"></span>
                                    Important   notes   on   using   osmdroid   in   your   app</a>
                            </li> <li>

                                <a href="Map-Sources.html" title="Map   Sources">
                                    <span class="none"></span>
                                    Map   Sources</a>
                            </li> <li>

                                <a href="Modular-Tile-Provider-Architecture.html" title="Modular   Tile   Provider   Architecture">
                                    <span class="none"></span>
                                    Modular   Tile   Provider   Architecture</a>
                            </li> <li>

                                <a href="Offline-Map-Tiles.html" title="Offline   Map   Tiles">
                                    <span class="none"></span>
                                    Offline   Map   Tiles</a>
                            </li> <li>

                                <a href="osmdroid-thirdparty.html" title="Osmdroid   thirdparty">
                                    <span class="none"></span>
                                    Osmdroid   thirdparty</a>
                            </li> <li>

                                <a href="Prerequisites.html" title="Prerequisites">
                                    <span class="none"></span>
                                    Prerequisites</a>
                            </li> <li>

                                <a href="Related-Projects.html" title="Related   Projects">
                                    <span class="none"></span>
                                    Related   Projects</a>
                            </li> <li>

                                <a href="Release-Procedure.html" title="Release   Procedure">
                                    <span class="none"></span>
                                    Release   Procedure</a>
                            </li> <li>

                                <a href="Tile-Caching-Settings.html" title="Tile   Caching   Settings">
                                    <span class="none"></span>
                                    Tile   Caching   Settings</a>
                            </li> <li>

                                <a href="Tile-Caching.html" title="Tile   Caching">
                                    <span class="none"></span>
                                    Tile   Caching</a>
                            </li> <li>

                                <a href="Upgrade-Guide.html" title="Upgrade   Guide">
                                    <span class="none"></span>
                                    Upgrade   Guide</a>
                            </li>

                    <li class="nav-header">Project Documentation</li>

                    <li>

                        <a href="project-info.html" title="Project Information">
                            <span class="icon-chevron-down"></span>
                            Project Information</a>
                        <ul class="nav nav-list">

                            <li>

                                <a href="team-list.html" title="Project Team">
                                    <span class="none"></span>
                                    Project Team</a>
                            </li>

                            <li>

                                <a href="scm:git:git@github.com:osmdroid/osmdroid.git" title="Source Repository">
                                    <span class="none"></span>
                                    Source Repository</a>
                            </li>

                            <li>

                                <a href="https://github.com/osmdroid/osmdroid/issues" title="Issue Tracking">
                                    <span class="none"></span>
                                    Issue Tracking</a>
                            </li>
                            <li>

                                <a href="project-license.html" title="Project License">
                                    <span class="none"></span>
                                    Project License</a>
                            </li>

                            <li>

                                <a href="dependency-repos.html" title="Dependency Repositories">
                                    <span class="none"></span>
                                    Dependency Repositories</a>
                            </li>


                            <li>

                                <a href="dependencyReport.html" title="Dependency Convergence">
                                    <span class="none"></span>
                                    Dependency Convergence</a>
                            </li>

                            <!-- maybe in the future
                                                        <li>

                                                            <a href="mail-lists.html" title="Mailing Lists">
                                                                <span class="none"></span>
                                                                Mailing Lists</a>
                                                        </li>

                                                        <li>

                                                            <a href="dependency-management.html" title="Dependency Management">
                                                                <span class="none"></span>
                                                                Dependency Management</a>
                                                        </li>


                            -->
                            <li>

                                <a href="https://travis-ci.org/osmdroid/osmdroid" title="Continuous Integration">
                                    <span class="none"></span>
                                    Continuous Integration</a>
                            </li>
                            <!--
                                                        <li>

                                                            <a href="plugins.html" title="Project Plugins">
                                                                <span class="none"></span>
                                                                Project Plugins</a>
                                                        </li>
                            -->
                            <li>

                                <a href="https://github.com/osmdroid/osmdroid/releases"
                                   title="Distribution Management">
                                    <span class="none"></span>
                                    Distribution Management</a>
                            </li>
                            <li>

                                <a href="javadoc.html" title="Project Reports">
                                    <span class="none"></span>
                                    Javadocs</a>

                            </li>

                            <li>

                                <a href="reports.html" title="Project Reports">
                                    <span class="none"></span>
                                    Project Reports</a>

                            </li>

                        </ul>
                    </li>


                </ul>


                <hr/>


            </div>
        </div>


        <div id="bodyColumn" class="span10">
            <a name="topOfPage"></a>
            <p>This document has the definitive guide for using osmdroid without a network connection.</p>
<h1>What are the supported storage formats?</h1>
<p>osmdroid provides out of the box support for several different types of offline map tile caches.</p>
<ul>
<li>osmdroid's flavor of a sqlite database (recommended)</li>
<li>osmdroid ZIP</li>
<li>MBTiles</li>
<li>GEMF</li>
<li>GeoPackage (still under development)</li>
</ul>
<h1>How can I create an offline storage archive?</h1>
<p>There are a few different options.</p>
<h2>OSM Map Tile Packager</h2>
<p>osmdroid comes with a tool to enable you to download tiles and storage them for offline use called the <code>OSM Map Tile Packager</code>. See the <a href="https://github.com/osmdroid/osmdroid/blob/master/OSMMapTilePackager/readme.md">readme.md for more information</a>.</p>
<h2>Mobile Atlas Creator (MOBAC)</h2>
<p>MOBAC is the easiest to use tool that there is and supports a huge array input map sources and output formats (and is open source).</p>
<p>General guidance</p>
<ol>
<li>Create a new atlas using of the supported types (osmdroid SQLite)</li>
<li>Select your map source</li>
<li>Select a bounding box for the area you want and the zoom levels you want to acquire</li>
<li>Click 'Add Selection'</li>
<li>Click 'Create Atlas'</li>
<li>Once it's done, copy the atlas file (.sqlite, .zip, etc) onto your osmdroid powered device to /sdcard/osmdroid/</li>
<li>Tell osmdroid to not use a network connection and set the map tile source. **</li>
</ol>
<h2>Maperitive.net</h2>
<p><a href="http://maperitive.net/">Maperitive</a> supports generating tile images from OSM data API and can be used as a replacement for MOBAC which has been <a href="http://wiki.openstreetmap.org/wiki/Blocked_applications">blocked by openstreetmap.org</a> for overusing traffic.</p>
<h3>Use the Cache Manager on device ( &gt; version 5.2)</h3>
<p>TODO</p>
<h3>Important note on tile source names.</h3>
<p>When downloading map sources using MOBAC and using one of the following formats</p>
<ul>
<li>osmdroid SQLite</li>
<li>osmdroid ZIP</li>
</ul>
<p>In both of these cases the name of the map source becomes encoded in the database or zip file format and is used to preserve uniqueness (more than one tile source per archive). Therefore you MUST tell osmdroid exactly the name of the map source when requesting offline tiles.</p>
<pre><code>@Override protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    map = (MapView) findViewById(R.id.map);
    map.setTileSource(new XYTileSource(&quot;YOUR MAP SOURCE&quot;, 0, 18, 256, &quot;.jpg&quot;, new String[] {}));
    //....
    map.setUseDataConnection(false); //optional, but a good way to prevent loading from the network and test your zip loading. 
    IMapController mapController = map.getController();
    mapController.setZoom(_A ZOOM LEVEL YOU HAVE IN YOUR ZIP_);
    GeoPoint startPoint = new GeoPoint(_POSITION SOMEWHERE INSIDE YOUR MAP_);
    mapController.setCenter(startPoint);
}
</code></pre>
<h3>Gotchas</h3>
<p>MOBAC imposes a limit on the number of tiles to download in one shot. This can be overcome by altering the source code.</p>
<p>MOBAC, especially with huge tile sets, can be a memory hog. It's algorithms from at least 1.8 to at least the 1.9.x releases caches as much as possible in memory until it hits the JVM ceiling, then does batch inserts into sqlite. While this is the way to make SQLite inserts as fast as possible, it can lead to stability issues with MOBAC.</p>
<h2>OSMBonusPack</h2>
<p><a href="https://github.com/MKergall/osmbonuspack">OSMBonusPack</a> is an addon Android library for osmdroid that has the ability to download and cache map tiles on device. See the <a href="https://github.com/MKergall/osmbonuspack/blob/master/OSMBonusPack/src/main/java/org/osmdroid/bonuspack/cachemanager/CacheManager.java">CacheManager</a></p>
<h1>What legal things do I need to know?</h1>
<p>Many map sources have disclaimers and legal statements that specifically state to NOT cache and rehost their map imagery. Some may have wording to disallows you to use their map imagery offline or to download large portions of the world.  Make sure you read the fine print! osmdroid takes no responsibility for map imagery misuse. That's between you and the imagery owner.</p>
<h1>Can you support tile format <code>x</code>?</h1>
<p>We'll happily take pull requests. That said, it's fairly simple to make a new tile source for osmdroid. Here are the basic steps:</p>
<ol>
<li>Create a class that implements IArchiveProvider. At the most basic level, the IArchiveProvider needs to turn an OSM tile coordinates (Zoom, X and Y coordinates) into an InputStream representing the tile if it's available.</li>
<li>Register the IArchiveProvider with <code>ArchiveFileFactory</code></li>
<li>Build, deploy and start up osmdroid</li>
</ol>
<h1>Can I change the location osmdroid looks for map tiles archives?</h1>
<p>Yes! However the answer depends on what version of osmdroid you're using.</p>
<p>In general, the answer files within the following class.</p>
<p><a href="https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/constants/OpenStreetMapTileProviderConstants.java">https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/constants/OpenStreetMapTileProviderConstants.java</a></p>
<p>See <code>setCachePath</code> and <code>TILE_PATH_BASE</code>. Even though the class is called <code>Constants</code> many of the fields are writable. You can use this to tweak a number of settings for your needs.</p>
<h1>What other mechanisms exists for loading tiles?</h1>
<p>Out of the box, we have the following (and they are checked in this order)</p>
<ul>
<li>Assets, you can place exploded zip archives in the assets folder of your app</li>
<li>Local file system (archives like zip, sqlite, etc)</li>
<li>Network sources cache - by default /sdcard/osmdroid/tiles/SOURCE/Z/X/Y.extension</li>
<li>Network sources - download what you need, when you need it</li>
</ul>
<h1>Using offline tile archives</h1>
<h2>Storage location</h2>
<p>This part is fairly simple. Copy your tiles into the osmdroid base path (which is by default /sdcard/osmdroid). This location can be changed programmatically (note this behavior will change with v5.6). You should have the following director structure</p>
<pre><code>/sdcard/osmdroid/
                 myZippedArchive.zip
                 myOsmdroidDatabase.sqlite
                 myMBTiles.mbtile
                 myGEMF.gemf
/sdcard/osmdroid/tiles/
                       cache.db (this is used for downloaded tiles)
</code></pre>
<p>So now that your archives are there, there's a few options a few mechanisms that can be used to help you on your way towards disconnected bliss. The next step is to tell osmdroid's <code>map tile provider</code> about the map tiles.</p>
<h2>Map Tile Provider options</h2>
<p>The default Map Tile Provider for osmdroid will automatically scan the osmdroid base path (again /sdcard/osmdroid/) for tile archives that it knows about, as well as search in your APK's Assets folder (exploded tiles only) then finally online sources.</p>
<p>If this doesn't scratch your itch, there's also the <code>OfflineOnlyTileProvider</code>. See Javadoc for more info.</p>
<h3>But I have my own tile archive format that I was to use!</h3>
<p>Great, implement the IArchiveFile interface, then register your implementation with the <code>ArchiveFileFactory</code></p>
<h2>Set the tile source</h2>
<p>You now need to tell osmdroid about what tile source name to use. This is needed because file archives can have more than one tile source and tile sources can be spanned across multiple archives. If you know the source name ahead of time, you can use the following.</p>
<pre><code>mapView.setTileSource(new XYTileSource(
        &quot;MAP TILE SOURCE HERE&quot;,
        MINZOOM,
        MAXZOOM,
        TILESIZE (256 is the normal one),
        &quot;.jpg&quot;,
        new String[]{}
));
</code></pre>
<p>If you don't know the tile source name ahead or plan on changing it frequently, you can discover the available tile source names at runtime. The IArchiveFile interface has a method that can be used to query an archive for the &quot;tile source name&quot;. See <code>getTileSources</code>. See the <code>SampleOfflineOnly</code> example for usage.</p>
<h2>Caveats and exemptions</h2>
<p>MBTiles does not store a tile source name in the database. Calling IArchiveFile.getTileSources will return an empty set in this case. On the flip side, MBTiles files will display to on the map regardless of what tile source the mapView is set to.</p>
<p>It is possible to remove all checks for tile source name comparisons for offline tiles, which would in effect, create a composite tile source. This could work out great if your archives don't overlap. To do this, extend the existing IArchiveFile providers to remove the checks, then register them as the with the <code>ArchiveFileFactory</code></p>


        </div>
        <div id="iframenav" style="visibility:hidden">
            <center><h3><a name="iframeAnchor"></a><a href="#topOfPage"> -- Top --</a></h3>
                <a href="javascript:popout();">Load in a new window</a>
            </center>
        </div>

        <iframe id="frame1" width="100%" height="75%" style="display:none"></iframe>



    </div>
</div>

<hr/>

<footer>
    <div class="container-fluid">
        <div class="row-fluid">
            <!-- footer -->
        </div>


    </div>
</footer>

<div class="modal hide fade" id="modal1">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Artifact Details</h3>
    </div>
    <div class="modal-body">
        <h3>Gradle</h3>
        <pre id="gradleDep">

        </pre>
        <h3>Maven</h3>
        <pre id="mavenDep">

        </pre>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" >Close</a>
    </div>
</div>

<script type="text/javascript">

/**
*    opens the current iframe url in a new window or tab
*/
function popout(){
    var destination = $("#frame1").attr('src');
    var win = window.open(destination, '_blank');
    win.focus();
}

/**
*    displays a report and shows the iframe
*/
function showReport(url){
    $("#iframenav").css('visibility','');
    $("#frame1").show();
    $("#frame1").attr('src', url);
    $("#frame1").attr('height', window.innerHeight);
    window.location.assign("#iframeAnchor");
}

/**
* shows our maven/gradle helper modal
type is the file extension
*/
function showModal(group, artifact, version,type, classifier){

/**
if classifier and types
    foreach classifier
        foreach types
else if classifier
    foreach classifier
else if type
    foreah type
else
    just output it
*/
    //string outputs
    var maventxt ="";
    var gradle="";

    var hasClassifiers = classifier !== "" && classifier !== undefined;
    var hasTypes = type !== "" && type !== undefined;

    if (hasClassifiers && hasTypes){
        type = type.trim();
        var types = type.split(" ");
        classifier = classifier.trim();
        var classifiers = classifier.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            for (var k = 0; k < classifiers.length; k++) {
                if (classifiers[k].trim().length==0)
                    continue;
                maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                    "</artifactId>\n\t";
                maventxt += "<type>" + types[i].trim() + "</type>\n\t";
                maventxt += "<classifier>" + classifiers[k].trim() + "</classifier>\n\t";
                maventxt +="<version>" + version + "</version>\n</dependency>\n";

                gradle += "compile '" + group + ":" + artifact + ":" + version;
                gradle += ":" + classifiers[k].trim();
                gradle += "@" + types[i];
                gradle += "'\n";
            }

        }


    } else if (hasClassifiers) {
        classifier = classifier.trim();
        var types = classifier.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
            maventxt += "<classifier>" + types[i].trim() + "</classifier>\n\t";
            maventxt +="<version>" + version + "</version>\n</dependency>\n";

            gradle += "compile '" + group + ":" + artifact + ":" + version;
            gradle += ":" + types[i];
            gradle += "'\n";

        }
    } else if (hasTypes) {
        type = type.trim();
        var types = type.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
            maventxt += "<type>" + types[i].trim() + "</type>\n\t";
            maventxt +="<version>" + version + "</version>\n</dependency>\n";

            gradle += "compile '" + group + ":" + artifact + ":" + version;
            gradle += "@" + types[i];
            gradle += "'\n";

        }
    } else {
            //no type or classifiers
         maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
         maventxt +="<version>" + version + "</version>\n</dependency>\n";
         gradle += "compile '" + group + ":" + artifact + ":" + version;
         gradle += "'\n";

    }

    $("#mavenDep").text(maventxt);
    $("#gradleDep").text(gradle);
    $('#modal1').modal()

}

$("table").addClass("table table-striped sortable");
$(function () {
    setNavigation();
});


/**
* this sets the "active" bit on the left hand side naviation menu
*/
function setNavigation() {
    var path = window.location.pathname;
    path = path.replace(/\/$/, "");
    path = decodeURIComponent(path);
    var idx=path.toString().lastIndexOf("/");
    if (idx >= 0)
        path=path.substring(idx+1, path.length);

    $(".nav a").each(function () {
        var href = $(this).attr('href');
        if (path.substring(0, href.length) === href) {
            $(this).closest('li').addClass('active');
        }
    });
}
</script>
</body>
</html>
